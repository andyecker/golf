<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATURBO Swing Path Simulator</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #87CEEB 0%, #90EE90 50%, #228B22 100%);
            color: white;
            min-height: 100vh;
        }
        
        .header {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        
        .header.hidden {
            transform: translateY(-100%);
            opacity: 0;
            pointer-events: none;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            font-size: 2.2em;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .subtitle {
            text-align: center;
            font-size: 1em;
            opacity: 0.9;
            margin-bottom: 0;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 280px;
            gap: 20px;
            margin-bottom: 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .swing-area {
            background: linear-gradient(180deg, #87CEEB 0%, #90EE90 70%, #228B22 100%);
            border-radius: 12px;
            padding: 15px;
            position: relative;
            min-height: 500px;
            overflow: hidden;
        }
        
        .hole-layout-controls {
            position: absolute;
            top: 15px;
            left: 15px;
            z-index: 10;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            padding: 8px;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        
        .hole-layout-controls h4 {
            margin: 0 0 6px 0;
            font-size: 0.8em;
            color: #333;
            text-align: center;
        }
        
        .hole-layout-btn.selected {
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            box-shadow: 0 0 10px rgba(255, 107, 53, 0.5);
        }
        
        .controls {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 12px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .sliders-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        
        .control-group {
            margin-bottom: 0;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 4px;
            font-weight: bold;
            font-size: 0.85em;
        }
        
        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.3);
            outline: none;
            appearance: none;
            margin-bottom: 6px;
        }
        
        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #fff;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #fff;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .value-display {
            font-size: 0.85em;
            font-weight: bold;
            color: #fff;
            text-align: center;
            background: rgba(0,0,0,0.3);
            padding: 3px 8px;
            border-radius: 12px;
        }
        
        .result-display {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
        }
        
        .shot-result {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 6px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .shot-description {
            font-size: 0.8em;
            opacity: 0.9;
            line-height: 1.3;
        }
        
        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .legend-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }
        
        .legend-item h3 {
            margin: 0 0 8px 0;
            font-size: 1em;
        }
        
        .legend-item p {
            margin: 8px 0 0 0;
            font-size: 0.85em;
            line-height: 1.3;
        }
        
        .legend-color {
            width: 30px;
            height: 4px;
            margin: 10px auto;
            border-radius: 2px;
        }
        
        svg {
            width: 100%;
            height: 100%;
        }
        
        .golfer-body {
            fill: #CD853F;
            stroke: #8B4513;
            stroke-width: 2;
        }
        
        .golfer-shirt {
            fill: #4169E1;
            stroke: #191970;
            stroke-width: 1;
        }
        
        .golfer-pants {
            fill: #2F4F4F;
            stroke: #000;
            stroke-width: 1;
        }
        
        .golfer-hair {
            fill: #8B4513;
            stroke: #654321;
            stroke-width: 1;
        }
        
        .club-shaft {
            stroke: #C0C0C0;
            stroke-width: 3;
            fill: none;
        }
        
        .club-grip {
            stroke: #000;
            stroke-width: 6;
            fill: none;
        }
        
        .club-head {
            fill: #C0C0C0;
            stroke: #808080;
            stroke-width: 2;
        }
        
        .ball {
            fill: #FFFAF0;
            stroke: #000;
            stroke-width: 1;
        }
        
        .swing-path {
            stroke: #FF4444;
            stroke-width: 4;
            fill: none;
            stroke-dasharray: 8,4;
            opacity: 0.8;
        }
        
        .club-face {
            stroke: #4444FF;
            stroke-width: 5;
            fill: none;
        }
        
        .ball-flight {
            stroke: #44FF44;
            stroke-width: 4;
            fill: none;
            marker-end: url(#arrowhead);
        }
        
        .target-line {
            stroke: #FFD700;
            stroke-width: 3;
            stroke-dasharray: 15,5;
            opacity: 0.7;
        }
        
        .label {
            font-size: 14px;
            font-weight: bold;
            fill: #000;
            text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
        }
        
        .ground {
            fill: #228B22;
            stroke: #006400;
            stroke-width: 2;
        }
        
        .tee {
            fill: #8B4513;
            stroke: #654321;
            stroke-width: 1;
        }
        
        .preset-buttons {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 8px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 6px;
        }
        
        .preset-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 8px 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        
        .hole-layout-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 5px 6px;
            border-radius: 4px;
            font-size: 9px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
            margin: 0 1px;
        }
        
        .hole-layout-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }
        
        .shot-types-controls {
            position: absolute;
            top: 15px;
            right: 15px;
            z-index: 10;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            padding: 8px;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            min-width: 120px;
        }
        
        .shot-types-controls h4 {
            margin: 0 0 6px 0;
            font-size: 0.8em;
            color: #333;
            text-align: center;
        }
        
        .shot-types-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3px;
        }
        
        .shot-type-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 3px 4px;
            border-radius: 4px;
            font-size: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
            text-align: center;
            line-height: 1.1;
        }
        
        .shot-type-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }
        
        .shot-type-btn.selected {
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            box-shadow: 0 0 10px rgba(255, 107, 53, 0.5);
        }
        
        .reset-btn {
            background: linear-gradient(135deg, #666 0%, #444 100%) !important;
            grid-column: 1 / -1;
            margin-top: 4px;
        }
        
        .preset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        
        .preset-btn:active {
            transform: translateY(0);
        }
        
        .preset-btn.selected {
            background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
            box-shadow: 0 0 15px rgba(255, 107, 53, 0.5);
        }
        
        .dogleg-controls {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 8px;
        }
        
        .dogleg-controls h4 {
            margin: 0 0 6px 0;
            text-align: center;
            font-size: 0.9em;
        }
        
        .shot-type-header {
            margin: 0 0 6px 0;
            text-align: center;
            font-size: 0.9em;
        }
        
        .shadow {
            fill: rgba(0,0,0,0.2);
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                position: relative;
            }
            
            .header {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .subtitle {
                font-size: 0.9em;
            }
            
            .controls {
                order: 2;
            }
            
            .swing-area {
                order: 1;
            }
        }
    </style>
</head>
<body>
    <div class="header" id="header">
        <h1>🏌️ ATURBO Swing Path Simulator</h1>
        <p class="subtitle">Interactive golf swing mechanics tool - Visualize how club face angle and swing path create different ball flights</p>
    </div>
    
    <div class="container">
        
        <div class="main-content">
            <div class="swing-area">
                <div class="hole-layout-controls">
                    <h4>Hole Layout</h4>
                    <div>
                        <button class="hole-layout-btn selected" id="straightHoleBtn">Straight</button>
                        <button class="hole-layout-btn" id="doglegLeftBtn">Left</button>
                        <button class="hole-layout-btn" id="doglegRightBtn">Right</button>
                    </div>
                </div>
                
                <div class="shot-types-controls">
                    <h4>Shot Types</h4>
                    <div class="shot-types-grid">
                        <button class="shot-type-btn" id="straightBtn">Straight</button>
                        <button class="shot-type-btn" id="drawBtn">Draw</button>
                        <button class="shot-type-btn" id="powerDrawBtn">Power Draw</button>
                        <button class="shot-type-btn" id="fadeBtn">Fade</button>
                        <button class="shot-type-btn" id="controlFadeBtn">Control Fade</button>
                        <button class="shot-type-btn" id="hookBtn">Hook</button>
                        <button class="shot-type-btn" id="sliceBtn">Slice</button>
                        <button class="shot-type-btn reset-btn" id="resetBtn">Reset</button>
                    </div>
                </div>
                
                <svg viewBox="0 0 700 600" id="swingDiagram">
                    <!-- Define arrow marker -->
                    <defs>
                        <marker id="arrowhead" markerWidth="12" markerHeight="8" 
                                refX="11" refY="4" orient="auto">
                            <polygon points="0 0, 12 4, 0 8" fill="#44FF44" />
                        </marker>
                        
                        <!-- Gradient for realistic fairway -->
                        <linearGradient id="fairwayGradient" x1="0%" y1="100%" x2="0%" y2="0%">
                            <stop offset="0%" style="stop-color:#228B22;stop-opacity:1" />
                            <stop offset="70%" style="stop-color:#32CD32;stop-opacity:1" />
                            <stop offset="85%" style="stop-color:#90EE90;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#98FB98;stop-opacity:1" />
                        </linearGradient>
                        
                        <!-- Green gradient -->
                        <radialGradient id="greenGradient" cx="50%" cy="50%" r="50%">
                            <stop offset="0%" style="stop-color:#228B22;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#006400;stop-opacity:1" />
                        </radialGradient>
                    </defs>
                    
                    <!-- Fairway with realistic shape -->
                    <polygon points="0,600 700,600 600,0 100,0" fill="url(#fairwayGradient)" id="fairway" />
                    
                    <!-- Rough/trees on sides -->
                    <polygon points="0,600 100,0 0,0" fill="#2F4F2F" opacity="0.3" />
                    <polygon points="700,600 600,0 700,0" fill="#2F4F2F" opacity="0.3" />
                    
                    <!-- Green (putting surface) -->
                    <ellipse cx="350" cy="80" rx="80" ry="40" fill="url(#greenGradient)" id="green" />
                    
                    <!-- Pin/flagstick -->
                    <line x1="350" y1="80" x2="350" y2="60" stroke="#000" stroke-width="2" id="pinStick" />
                    
                    <!-- Flag -->
                    <polygon points="350,60 370,65 350,70" fill="#FF0000" id="flag" />
                    
                    <!-- Trees for all hole layouts -->
                    <!-- Left side trees -->
                    <g id="leftSideTrees">
                        <!-- Tree 1 -->
                        <rect x="150" y="450" width="6" height="30" fill="#8B4513" />
                        <circle cx="153" cy="445" r="18" fill="#228B22" />
                        <circle cx="148" cy="441" r="12" fill="#32CD32" />
                        <circle cx="158" cy="441" r="12" fill="#32CD32" />
                        
                        <!-- Tree 2 -->
                        <rect x="120" y="350" width="6" height="30" fill="#8B4513" />
                        <circle cx="123" cy="345" r="18" fill="#228B22" />
                        <circle cx="118" cy="341" r="12" fill="#32CD32" />
                        <circle cx="128" cy="341" r="12" fill="#32CD32" />
                        
                        <!-- Tree 3 -->
                        <rect x="180" y="250" width="6" height="30" fill="#8B4513" />
                        <circle cx="183" cy="245" r="18" fill="#228B22" />
                        <circle cx="178" cy="241" r="12" fill="#32CD32" />
                        <circle cx="188" cy="241" r="12" fill="#32CD32" />
                        
                        <!-- Tree 4 -->
                        <rect x="140" y="180" width="6" height="30" fill="#8B4513" />
                        <circle cx="143" cy="175" r="18" fill="#228B22" />
                        <circle cx="138" cy="171" r="12" fill="#32CD32" />
                        <circle cx="148" cy="171" r="12" fill="#32CD32" />
                    </g>
                    
                    <!-- Right side trees -->
                    <g id="rightSideTrees">
                        <!-- Tree 1 -->
                        <rect x="550" y="450" width="6" height="30" fill="#8B4513" />
                        <circle cx="553" cy="445" r="18" fill="#228B22" />
                        <circle cx="548" cy="441" r="12" fill="#32CD32" />
                        <circle cx="558" cy="441" r="12" fill="#32CD32" />
                        
                        <!-- Tree 2 -->
                        <rect x="580" y="350" width="6" height="30" fill="#8B4513" />
                        <circle cx="583" cy="345" r="18" fill="#228B22" />
                        <circle cx="578" cy="341" r="12" fill="#32CD32" />
                        <circle cx="588" cy="341" r="12" fill="#32CD32" />
                        
                        <!-- Tree 3 -->
                        <rect x="520" y="250" width="6" height="30" fill="#8B4513" />
                        <circle cx="523" cy="245" r="18" fill="#228B22" />
                        <circle cx="518" cy="241" r="12" fill="#32CD32" />
                        <circle cx="528" cy="241" r="12" fill="#32CD32" />
                        
                        <!-- Tree 4 -->
                        <rect x="560" y="180" width="6" height="30" fill="#8B4513" />
                        <circle cx="563" cy="175" r="18" fill="#228B22" />
                        <circle cx="558" cy="171" r="12" fill="#32CD32" />
                        <circle cx="568" cy="171" r="12" fill="#32CD32" />
                    </g>
                    
                    <!-- Additional trees for dogleg holes -->
                    <g id="doglegLeftTrees" style="display: none;">
                        <!-- Blocking trees on left side for dogleg left (forces you to go left) -->
                        <rect x="270" y="300" width="8" height="40" fill="#8B4513" />
                        <circle cx="274" cy="290" r="25" fill="#228B22" />
                        <circle cx="268" cy="285" r="18" fill="#32CD32" />
                        <circle cx="280" cy="285" r="18" fill="#32CD32" />
                        
                        <rect x="240" y="280" width="8" height="40" fill="#8B4513" />
                        <circle cx="244" cy="270" r="25" fill="#228B22" />
                        <circle cx="238" cy="265" r="18" fill="#32CD32" />
                        <circle cx="250" cy="265" r="18" fill="#32CD32" />
                        
                        <rect x="210" y="320" width="8" height="40" fill="#8B4513" />
                        <circle cx="214" cy="310" r="25" fill="#228B22" />
                        <circle cx="208" cy="305" r="18" fill="#32CD32" />
                        <circle cx="220" cy="305" r="18" fill="#32CD32" />
                        
                        <text x="180" y="250" class="label" style="font-size: 12px;">Trees Block Direct Route</text>
                    </g>
                    
                    <g id="doglegRightTrees" style="display: none;">
                        <!-- Blocking trees on right side for dogleg right (forces you to go right) -->
                        <rect x="430" y="300" width="8" height="40" fill="#8B4513" />
                        <circle cx="434" cy="290" r="25" fill="#228B22" />
                        <circle cx="428" cy="285" r="18" fill="#32CD32" />
                        <circle cx="440" cy="285" r="18" fill="#32CD32" />
                        
                        <rect x="460" y="280" width="8" height="40" fill="#8B4513" />
                        <circle cx="464" cy="270" r="25" fill="#228B22" />
                        <circle cx="458" cy="265" r="18" fill="#32CD32" />
                        <circle cx="470" cy="265" r="18" fill="#32CD32" />
                        
                        <rect x="490" y="320" width="8" height="40" fill="#8B4513" />
                        <circle cx="494" cy="310" r="25" fill="#228B22" />
                        <circle cx="488" cy="305" r="18" fill="#32CD32" />
                        <circle cx="500" cy="305" r="18" fill="#32CD32" />
                        
                        <text x="450" y="250" class="label" style="font-size: 12px;">Trees Block Direct Route</text>
                    </g>
                    
                    <!-- Hole -->
                    <circle cx="350" cy="80" r="2" fill="#000" id="hole" />
                    
                    <!-- Target line (going to pin) -->
                    <line x1="350" y1="600" x2="350" y2="80" class="target-line" id="targetLine" />
                    <text x="360" y="50" class="label">To Pin</text>
                    
                    <!-- Golfer shadow -->
                    <ellipse cx="320" cy="590" rx="15" ry="8" class="shadow" />
                    
                    <!-- Golfer -->
                    <rect x="315" y="580" width="8" height="15" class="golfer-pants" />
                    <rect x="315" y="560" width="8" height="15" class="golfer-pants" />
                    <rect x="317" y="560" width="4" height="20" class="golfer-pants" />
                    <rect x="312" y="540" width="16" height="20" rx="3" class="golfer-shirt" />
                    <rect x="310" y="540" width="20" height="3" rx="1" class="golfer-shirt" />
                    <rect x="320" y="545" width="15" height="4" rx="2" class="golfer-body" />
                    <rect x="320" y="552" width="15" height="4" rx="2" class="golfer-body" />
                    <circle cx="320" cy="535" r="8" class="golfer-body" />
                    <ellipse cx="320" cy="532" rx="6" ry="5" class="golfer-hair" />
                    
                    <!-- Golf club -->
                    <rect x="335" y="547" width="2" height="6" rx="1" class="club-grip" />
                    <line x1="336" y1="550" x2="350" y2="580" class="club-shaft" id="clubShaft" />
                    <rect x="348" y="578" width="12" height="6" rx="2" class="club-head" id="clubHead" />
                    
                    <!-- Tee and ball -->
                    <rect x="349" y="583" width="2" height="6" class="tee" />
                    <circle cx="350" cy="581" r="3" class="ball" />
                    
                    <!-- Swing path -->
                    <path d="M 350 581 Q 290 525 280 505" class="swing-path" id="swingPath" />
                    
                    <!-- Ball flight -->
                    <path d="M 350 581 Q 350 400 350 200" class="ball-flight" id="ballFlight" />
                    
                    <!-- Labels -->
                    <text x="220" y="480" class="label">Swing Path</text>
                    <text x="220" y="495" class="label" style="fill: #FF4444; font-size: 16px;">- - - -</text>
                    
                    <text x="380" y="560" class="label">Club Face</text>
                    <line x1="375" y1="570" x2="400" y2="570" class="club-face" id="clubFaceLabel" stroke-width="3" />
                    
                    <text x="280" y="350" class="label">Ball Flight</text>
                    <text x="280" y="365" class="label" style="fill: #44FF44; font-size: 16px;">━━━→</text>
                </svg>
            </div>
            
            <div class="controls">
                <div class="sliders-row">
                    <div class="control-group">
                        <label for="clubFaceAngle">Club Face</label>
                        <input type="range" id="clubFaceAngle" class="slider" min="-45" max="45" value="0" step="1">
                        <div class="value-display" id="clubFaceValue">0° Square</div>
                    </div>
                    
                    <div class="control-group">
                        <label for="swingPathAngle">Swing Path</label>
                        <input type="range" id="swingPathAngle" class="slider" min="-45" max="45" value="0" step="1">
                        <div class="value-display" id="swingPathValue">0° Square</div>
                    </div>
                </div>
                
                <div class="result-display">
                    <div class="shot-result" id="shotResult">Perfect Straight Shot</div>
                    <div class="shot-description" id="shotDescription">
                        Excellent alignment! Ball flies straight down the target line with maximum distance.
                    </div>
                </div>
            </div>
        </div>
        
        <div class="legend">
            <div class="legend-item">
                <h3>Swing Path</h3>
                <div class="legend-color" style="background: #FF4444;"></div>
                <p>The arc the club travels through impact. Negative = in-to-out (from inside), Positive = out-to-in (from outside)</p>
            </div>
            
            <div class="legend-item">
                <h3>Club Face</h3>
                <div class="legend-color" style="background: #4444FF;"></div>
                <p>Angle of club face at impact relative to target line. Negative = closed (left), Positive = open (right)</p>
            </div>
            
            <div class="legend-item">
                <h3>Ball Flight</h3>
                <div class="legend-color" style="background: #44FF44;"></div>
                <p>Ball trajectory relative to target line. Shows how face angle and swing path combine to create ball flight</p>
            </div>
        </div>
    </div>

    <script>
        // Add scroll behavior for header
        let lastScrollTop = 0;
        const header = document.getElementById('header');
        
        window.addEventListener('scroll', function() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            if (scrollTop > 100) {
                header.classList.add('hidden');
            } else {
                header.classList.remove('hidden');
            }
            
            lastScrollTop = scrollTop;
        });
        
        // Get DOM elements
        const clubFaceSlider = document.getElementById('clubFaceAngle');
        const swingPathSlider = document.getElementById('swingPathAngle');
        const clubFaceValue = document.getElementById('clubFaceValue');
        const swingPathValue = document.getElementById('swingPathValue');
        const shotResult = document.getElementById('shotResult');
        const shotDescription = document.getElementById('shotDescription');
        const swingPathElement = document.getElementById('swingPath');
        const ballFlightElement = document.getElementById('ballFlight');

        // Define shot type configurations
        const shotTypes = {
            straight: { face: 0, path: 0 },
            draw: { face: 5, path: 10 },
            powerDraw: { face: 10, path: 20 },
            fade: { face: -5, path: -10 },
            controlFade: { face: -10, path: -20 },
            hook: { face: 10, path: 25 },
            slice: { face: -10, path: -25 }
        };

        // Track the current active shot type
        let currentActiveShotType = null;

        // Helper functions
        function clearAllShotTypeSelections() {
            document.querySelectorAll('.shot-type-btn:not(.reset-btn)').forEach(btn => {
                btn.classList.remove('selected');
            });
            currentActiveShotType = null;
        }

        function checkShotTypeMatch() {
            const currentFace = parseInt(clubFaceSlider.value);
            const currentPath = parseInt(swingPathSlider.value);
            
            // Don't auto-select if user manually adjusted sliders from a preset
            if (currentActiveShotType) {
                const activeShot = shotTypes[currentActiveShotType];
                if (activeShot && (activeShot.face !== currentFace || activeShot.path !== currentPath)) {
                    clearAllShotTypeSelections();
                }
            }
        }
        
        function updateVisualization() {
            const clubFaceAngle = parseInt(clubFaceSlider.value);
            const swingPathAngle = parseInt(swingPathSlider.value);
            
            // Update value displays
            clubFaceValue.textContent = `${clubFaceAngle}° ${clubFaceAngle < 0 ? 'Closed' : clubFaceAngle > 0 ? 'Open' : 'Square'}`;
            swingPathValue.textContent = `${swingPathAngle}° ${swingPathAngle < 0 ? 'In-to-Out' : swingPathAngle > 0 ? 'Out-to-In' : 'Square'}`;
            
            // Calculate ball flight
            const ballFlight = calculateBallFlight(clubFaceAngle, swingPathAngle);
            
            // Update shot result
            shotResult.textContent = ballFlight.name;
            shotDescription.textContent = ballFlight.description;
            shotResult.style.color = ballFlight.color;
            
            // Update visual elements
            updateClubFace(clubFaceAngle);
            updateSwingPath(swingPathAngle);
            updateBallFlight(clubFaceAngle, swingPathAngle);

            // Check if current settings still match active shot type
            checkShotTypeMatch();
        }
        
        function calculateBallFlight(face, path) {
            const faceRelativeToPath = face - path;
            
            // Straight shots (face matches path within 2 degrees)
            if (Math.abs(faceRelativeToPath) <= 2) {
                if (Math.abs(path) <= 2) {
                    return {
                        name: "Perfect Straight Shot",
                        description: "Excellent alignment! Ball flies straight down the target line with maximum distance.",
                        color: "#44FF44"
                    };
                } else if (path > 2) {
                    return {
                        name: "Push Shot",
                        description: "Face square to path but path is right. Ball flies straight right.",
                        color: "#FF8844"
                    };
                } else {
                    return {
                        name: "Pull Shot",
                        description: "Face square to path but path is left. Ball flies straight left.",
                        color: "#FF8844"
                    };
                }
            }
            
            // Shots that curve right (face open to path)
            if (faceRelativeToPath > 0) {
                if (faceRelativeToPath <= 6) {
                    return {
                        name: "Fade",
                        description: "Clubface slightly open to swing path. Ball starts left of target, curves gently right.",
                        color: "#88CCFF"
                    };
                } else if (faceRelativeToPath <= 12) {
                    return {
                        name: "Control Fade",
                        description: "Clubface open to swing path. Ball starts left, curves right with reliable control.",
                        color: "#4488FF"
                    };
                } else if (faceRelativeToPath <= 20) {
                    return {
                        name: "Slice",
                        description: "Clubface open relative to swing path. Ball starts left, curves dramatically right.",
                        color: "#FF4444"
                    };
                } else {
                    return {
                        name: "Severe Slice",
                        description: "Clubface very open to swing path. Ball starts left, curves extremely right.",
                        color: "#CC0000"
                    };
                }
            }
            
            // Shots that curve left (face closed to path)
            if (faceRelativeToPath < 0) {
                if (Math.abs(faceRelativeToPath) <= 6) {
                    return {
                        name: "Draw",
                        description: "Clubface slightly closed to swing path. Ball starts right of target, curves gently left.",
                        color: "#88CCFF"
                    };
                } else if (Math.abs(faceRelativeToPath) <= 12) {
                    return {
                        name: "Power Draw",
                        description: "Clubface closed to swing path. Ball starts right, curves left with added distance.",
                        color: "#4488FF"
                    };
                } else if (Math.abs(faceRelativeToPath) <= 20) {
                    return {
                        name: "Hook",
                        description: "Clubface closed relative to swing path. Ball starts right, curves dramatically left.",
                        color: "#FF4444"
                    };
                } else {
                    return {
                        name: "Severe Hook",
                        description: "Clubface very closed to swing path. Ball starts right, curves extremely left.",
                        color: "#CC0000"
                    };
                }
            }
        }
        
        function updateClubFace(faceAngle) {
            const labelCenterX = 387.5;
            const labelCenterY = 570;
            const labelLength = 25;
            const radians = (faceAngle * Math.PI) / 180;
            const halfLength = labelLength / 2;
            const x1 = labelCenterX - halfLength * Math.cos(radians);
            const y1 = labelCenterY - halfLength * Math.sin(radians);
            const x2 = labelCenterX + halfLength * Math.cos(radians);
            const y2 = labelCenterY + halfLength * Math.sin(radians);
            
            document.getElementById('clubFaceLabel').setAttribute('x1', x1);
            document.getElementById('clubFaceLabel').setAttribute('y1', y1);
            document.getElementById('clubFaceLabel').setAttribute('x2', x2);
            document.getElementById('clubFaceLabel').setAttribute('y2', y2);
        }
        
        function updateSwingPath(pathAngle) {
            const startX = 350;
            const startY = 581;
            const golferHeadX = 320;
            const golferHeadY = 535;
            const baseControlX = golferHeadX - 30;
            const baseControlY = golferHeadY - 10;
            const controlX = baseControlX;
            const controlY = baseControlY - (pathAngle * 1.5);
            const baseEndX = golferHeadX - 40;
            const baseEndY = golferHeadY - 30;
            const endX = baseEndX;
            const endY = baseEndY - (pathAngle * 1);
            
            swingPathElement.setAttribute('d', 
                `M ${startX} ${startY} Q ${controlX} ${controlY} ${endX} ${endY}`);
        }
        
        function updateBallFlight(faceAngle, pathAngle) {
            const startX = 350;
            const startY = 581;
            
            // Ball flight physics based on modern ball flight laws from research
            // Ball starts 85% toward face angle, 15% toward path (per TrackMan data)
            const startDirection = faceAngle * 0.85 + pathAngle * 0.15;
            
            // Curve is determined by face-to-path difference
            // Ball curves from path toward face
            const faceToPath = faceAngle - pathAngle;
            
            // Calculate curve amount - ball curves away from path toward face
            let curveAmount = faceToPath;
            
            // For hooks and slices, dramatically increase the curve
            if (Math.abs(faceToPath) > 15) {
                curveAmount = curveAmount * 1.5; // Make hooks/slices more dramatic
            }
            
            // Calculate the flight path using quadratic bezier curve
            // Start point
            const x0 = startX;
            const y0 = startY;
            
            // Control point - this creates the arc
            // Start direction affects where the ball initially goes
            const controlX = startX + startDirection * 4;
            const controlY = 200; // Height of arc
            
            // End point - includes both start direction and curve
            const endX = startX + startDirection * 3 + curveAmount * 8;
            const endY = 80;
            
            // For really dramatic hooks/slices, adjust the control point more
            let adjustedControlX = controlX;
            if (Math.abs(faceToPath) > 15) {
                // Pull the control point opposite to the curve for more dramatic arc
                adjustedControlX = controlX - curveAmount * 2;
            }
            
            // Clamp values to keep on screen
            const clampedControlX = Math.max(50, Math.min(650, adjustedControlX));
            const clampedEndX = Math.max(20, Math.min(680, endX));
            
            ballFlightElement.setAttribute('d', 
                `M ${x0} ${y0} Q ${clampedControlX} ${controlY} ${clampedEndX} ${endY}`);
        }
        
        function setDogleg(type) {
            const fairway = document.getElementById('fairway');
            const green = document.getElementById('green');
            const targetLine = document.getElementById('targetLine');
            const leftSideTrees = document.getElementById('leftSideTrees');
            const rightSideTrees = document.getElementById('rightSideTrees');
            const doglegLeftTrees = document.getElementById('doglegLeftTrees');
            const doglegRightTrees = document.getElementById('doglegRightTrees');
            const pinStick = document.getElementById('pinStick');
            const flag = document.getElementById('flag');
            const hole = document.getElementById('hole');
            
            // Always show side trees
            leftSideTrees.style.display = 'block';
            rightSideTrees.style.display = 'block';
            
            // Hide dogleg trees by default
            doglegLeftTrees.style.display = 'none';
            doglegRightTrees.style.display = 'none';
            
            let greenCenterX, greenCenterY = 80;
            
            if (type === 'straight') {
                fairway.setAttribute('points', '0,600 700,600 600,0 100,0');
                greenCenterX = 350;
            } else if (type === 'left') {
                fairway.setAttribute('points', '0,600 700,600 500,0 50,0');
                greenCenterX = 280;
                doglegLeftTrees.style.display = 'block';
            } else if (type === 'right') {
                fairway.setAttribute('points', '0,600 700,600 650,0 200,0');
                greenCenterX = 420;
                doglegRightTrees.style.display = 'block';
            }
            
            green.setAttribute('cx', greenCenterX);
            green.setAttribute('cy', greenCenterY);
            targetLine.setAttribute('x2', greenCenterX);
            targetLine.setAttribute('y2', greenCenterY);
            pinStick.setAttribute('x1', greenCenterX);
            pinStick.setAttribute('x2', greenCenterX);
            pinStick.setAttribute('y1', greenCenterY);
            pinStick.setAttribute('y2', greenCenterY - 20);
            flag.setAttribute('points', `${greenCenterX},${greenCenterY-20} ${greenCenterX+20},${greenCenterY-15} ${greenCenterX},${greenCenterY-10}`);
            hole.setAttribute('cx', greenCenterX);
            hole.setAttribute('cy', greenCenterY);
        }

        // Function to apply shot type with toggle behavior
        function applyShotType(shotType, buttonElement) {
            if (currentActiveShotType === shotType) {
                // If this shot type is already active, toggle it off (reset to straight)
                clubFaceSlider.value = 0;
                swingPathSlider.value = 0;
                clearAllShotTypeSelections();
            } else {
                // Apply the new shot type
                const shotConfig = shotTypes[shotType];
                clubFaceSlider.value = shotConfig.face;
                swingPathSlider.value = shotConfig.path;
                clearAllShotTypeSelections();
                buttonElement.classList.add('selected');
                currentActiveShotType = shotType;
            }
            updateVisualization();
        }
        
        // Event listeners
        clubFaceSlider.addEventListener('input', updateVisualization);
        swingPathSlider.addEventListener('input', updateVisualization);
        
        // Hole layout buttons (now in top-left overlay)
        document.getElementById('straightHoleBtn').addEventListener('click', function() {
            document.querySelectorAll('.hole-layout-btn').forEach(btn => btn.classList.remove('selected'));
            this.classList.add('selected');
            setDogleg('straight');
        });
        
        document.getElementById('doglegLeftBtn').addEventListener('click', function() {
            document.querySelectorAll('.hole-layout-btn').forEach(btn => btn.classList.remove('selected'));
            this.classList.add('selected');
            setDogleg('left');
        });
        
        document.getElementById('doglegRightBtn').addEventListener('click', function() {
            document.querySelectorAll('.hole-layout-btn').forEach(btn => btn.classList.remove('selected'));
            this.classList.add('selected');
            setDogleg('right');
        });
        
        // Shot type buttons with toggle behavior
        document.getElementById('straightBtn').addEventListener('click', function() {
            applyShotType('straight', this);
        });
        
        document.getElementById('drawBtn').addEventListener('click', function() {
            applyShotType('draw', this);
        });
        
        document.getElementById('powerDrawBtn').addEventListener('click', function() {
            applyShotType('powerDraw', this);
        });
        
        document.getElementById('fadeBtn').addEventListener('click', function() {
            applyShotType('fade', this);
        });
        
        document.getElementById('controlFadeBtn').addEventListener('click', function() {
            applyShotType('controlFade', this);
        });
        
        document.getElementById('hookBtn').addEventListener('click', function() {
            applyShotType('hook', this);
        });
        
        document.getElementById('sliceBtn').addEventListener('click', function() {
            applyShotType('slice', this);
        });
        
        document.getElementById('resetBtn').addEventListener('click', function() {
            // Reset sliders to zero
            clubFaceSlider.value = 0;
            swingPathSlider.value = 0;
            
            // Reset hole layout to straight
            document.querySelectorAll('.hole-layout-btn').forEach(btn => btn.classList.remove('selected'));
            document.getElementById('straightHoleBtn').classList.add('selected');
            setDogleg('straight');
            
            // Clear all shot type selections
            clearAllShotTypeSelections();
            
            // Update visualization
            updateVisualization();
        });
        
        // Initialize
        updateVisualization();
    </script>
</body>
</html>
